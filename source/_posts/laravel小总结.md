---
title: laravel小总结
date: 2017-05-08 16:55:16
tags: [技术,laravel]
---

# laravel总结

1. 严格遵循psr规范
    实在记不住的话，起码记得下述几点：
    * namespace 声明后 必须 插入一个空白行。所有use都必须在namespace后，use 声明语句块后 必须 要有一个空白行。
    * 所有方法都必须添加访问修饰符。
    * 方法名称后一定不能有空格符，其开始花括号必须独占一行，结束花括号也必须在方法主体后单独成一行。参数左括号后和右括号前一定不能有空格。
    * 各种运算符的左右各留一个空格。
    * 优先判断错误，即非正常结果的处理方法优先写在上面。正常流程的执行写在最后。
2. ORM 的一些总结
    * 查询中的get与all方法返回的是集合。
    * 当没有数据时，返回的是空集合，集合可以在任何时候调用toArray方法，如果查询到的结果为空，得到的是[]，可以用 empty() 方法判断是否有数据。
    * 创建、插入成功返回的是创建插入的那条数据的模型。
    * first如果查不到数据，返回的是null,可用empty判断。
    * 判断是否插入成功，用(! $result)判断，(感叹号和$result）间保留一个空格。判断完成后才可调用toArray。
    * update和delete，destroy方法，返回的是影响行数。在laravel中，update方法永远返回大于1的行数，因为updated_at字段总是会被更新。如果要避免这种情况，请在模型中关闭laravel的自动维护字段的属性。
    * destory和delete返回的是影响行数，即失败为0，成功为删除行数。
3. foreach 
    * 确保有数据才能进行，否则会因无数据而报错。所以在foreach之前加以判断。
4. 对于一些比较老版本的mysql，在执行数据库迁移时候，可能会说key长度溢出。解决方案两个    
    * 升级数据库版本。
    * 设置其长度，在appService，boot添加，Schema::defaultStringLength(191);